<!DOCTYPE html>
<html lang="en">

<head>
    <base href="/tanka-graphql/">
    <title>02-imports - Tanka GraphQL</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link rel="stylesheet" href="master/prism.css" />
    <style>
        body {
            height: 100%;
            width: 100%;         
        }

        a {
            color: rgba(0,0,0,.65);
        }

        a:hover {
            color: rgba(8, 8, 8, 0.65);
        }

        blockquote {
            border: 1px solid rgba(94, 94, 94, 0.65);
            border-left: 5px solid rgba(94, 94, 94, 0.65);
            padding: 0.75rem 1.5rem;
            margin-top: 1rem;
            margin-bottom: 1rem;            
        }

        .sidebar {
            margin-bottom: 20px;
        }

        .sidebar .nav-item {
            list-style: none;
        }

        .sidebar .nav-link {
            display: block;
            padding: .25rem 1.5rem;
            font-size: 90%;
            color: rgba(0,0,0,.65);
        }

        .sidebar .nav-link:hover {
            text-decoration: underline;
        }

        .content h1,
        .content h2,
        .content h3,
        .content h4,
        .content h5,
        .content h6 {
            font-weight: 300;
        }

        
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Tanka GraphQL</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="master/0-getting-started/01-create-schema.html">Getting Started</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="master/0-language/01-parser.html">Language</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="master/1-execution/01-resolvers.html">Execution</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="master/2-server/0-common.html">Server</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="master/3-code-generator/1-installation.html">Code Generation</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="master/7-type-system/02-schema.html">Type System</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="master/10-extensions/tracing.html">Extensions</a>
                </li>
        </ul>
        <ul class="navbar-nav ml-auto">
             <li class="nav-item">
                <a class="nav-link" href="https://github.com/pekkah/tanka-graphql">GitHub</a>
            </li>
            <li class="nav-item dropdown justify-content-end">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    master
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item" href="/tanka-graphql/master">master</a>
                        <a class="dropdown-item" href="/tanka-graphql/2.0.0">2.0.0</a>
                        <a class="dropdown-item" href="/tanka-graphql/2.0.1">2.0.1</a>
                </div>
            </li>
        </ul>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="row flex-xl-nowrap">
            <nav class="col-12 col-md-3 col-xl-2 sidebar">
                <div class="sidebar-sticky">
    <nav class="nav flex-column">
<li class="nav-item">
    <a class="nav-link" href=master/0-language/01-parser.html>Language</a>
    <ul>
    </ul>
</li>    </nav>
    <nav class="nav flex-column">
<li class="nav-item">
    <a class="nav-link" href=master/0-language/02-imports.html>Imports</a>
    <ul>
    </ul>
</li>    </nav>
                </div>
            </nav>
            <main role="main" class="col-12 col-md-8 col-xl-6 py-sm-1 py-md-3 pl-md-5 content">
                <h2 id="imports">Imports</h2>
<p>Todo: fix syntax</p>
<p>GraphQL specification does not yet provide a way of importing types
from SDL from other sources. There is some <a href="https://github.com/graphql/graphql-wg/blob/master/notes/2018-02-01.md#present-graphql-import">discussion</a> on
this topic but nothing concrete and &quot;official&quot; is yet released.</p>
<blockquote class="blockquote">
<p><a href="https://github.com/ardatan/graphql-import">graphql-import</a> solves this with a JS style syntax</p>
</blockquote>
<p>Tanka GraphQL solves this by providing a similar syntax to
<a href="https://github.com/ardatan/graphql-import">graphql-import</a> but not implementing it fully.</p>
<h3 id="syntax">Syntax</h3>
<p>Syntax of the import requires providing a keyword, optional type filters
and the location from which to import. Location does not need to be a file
system. Imports need to be wrapped into block string and need to be at the
beginning of the document.</p>
<p>Example: import all types from &quot;/query&quot;</p>
<pre><code class="language-graphql">&quot;&quot;&quot;
tanka_import from &quot;/query&quot;
&quot;&quot;&quot;
</code></pre>
<p>Example: import <code>Person</code> from <code>&quot;/types/Person&quot;</code></p>
<pre><code class="language-graphql">&quot;&quot;&quot;
tanka_import Person from &quot;/types/Person&quot;
&quot;&quot;&quot;
</code></pre>
<p>Example: import <code>Person</code>, <code>Pet</code> from <code>&quot;/types/Person&quot;</code></p>
<pre><code class="language-graphql">&quot;&quot;&quot;
tanka_import Person, Pet from &quot;/types/Person&quot;
&quot;&quot;&quot;
</code></pre>
<h3 id="providers">Providers</h3>
<p><code>Parser.ParseDocumentAsync</code> allows providing <code>ParserOptions</code> which allows
setting a list of import providers. Parser will query these providers when
it finds the <code>tanka_import</code>-keyword. Provider can tell the parser that it can
complete the import by returning true from <code>CanImport</code> function. If multiple
providers can import the import then the parser will pick the first one.</p>
<p>Built in providers: (these are added to options by default)</p>
<ul>
<li><code>ExtensionsImportProvider</code>: provides Tanka GraphQL extension types,</li>
<li><code>FileSystemImportProvider</code>: import types from files,</li>
<li><code>EmbeddedResourceImportProvider</code>: import types from EmbeddedResources.</li>
</ul>
<p>Custom providers can be implemented by implementing <code>IImportProvider</code> interface
and adding the provider to the options.</p>
<blockquote class="blockquote">
<p>Imports are only supported when using the <code>SchemaBuilder.SdlAsync</code> extension
method or <code>Parser.ParseDocumentAsync</code></p>
</blockquote>
<h4 id="extensionsimportprovider"><code>ExtensionsImportProvider</code></h4>
<p>This import provider allows importing Tanka GraphQL extensions. Currently these
extensions only include:</p>
<ul>
<li>[cost-analysis][]: <code>@cost</code> directive.</li>
</ul>
<p>Syntax</p>
<pre><code class="language-graphql">&quot;&quot;&quot;
tanka_import from &quot;tanka://&lt;extension&gt;&quot;
&quot;&quot;&quot;
</code></pre>
<h4 id="filesystemimportprovider"><code>FileSystemImportProvider</code></h4>
<p>This import provider allows importing files. These files are parsed using the
same parser options as the main file and can also contain other imports.</p>
<p>Syntax</p>
<pre><code class="language-graphql">&quot;&quot;&quot;
tanka_import from &quot;path/to/file&quot;
&quot;&quot;&quot;
</code></pre>
<p>If no file extension provided then &quot;.graphql&quot; will be appended to the path.</p>
<p>Example
[]</p>
<pre><code class="language-csharp">    [Fact]
    public async Task Parse_Sdl()
    {
        /* Given */
        var sdl =
            @&quot;
                    &quot;&quot;&quot;&quot;&quot;&quot;
                    tanka_import from &quot;&quot;Files/Import&quot;&quot;
                    &quot;&quot;&quot;&quot;&quot;&quot;

                    type Query {
                        imported: ImportedType
                    }
                 &quot;;

        /* When */
        var builder = new SchemaBuilder()
            // BuiltIn import providers are used
            .Add(sdl);

        var schema = await builder.Build(new SchemaBuildOptions());

        /* Then */
        var importedType = schema.GetNamedType(&quot;ImportedType&quot;);
        Assert.NotNull(importedType);

        var importedField = schema.GetField(schema.Query.Name, &quot;imported&quot;);
        Assert.Equal(importedType.Name, importedField.Type.Unwrap().Name);

        var nestedType = schema.GetNamedType(&quot;NestedObject&quot;);
        Assert.NotNull(nestedType);
    }

</code></pre>
<h4 id="embeddedresourceimportprovider"><code>EmbeddedResourceImportProvider</code></h4>
<p>This import provider allows importing files embedded into the assembly. These files are parsed using the
same parser options as the main file and can also contain other imports.</p>
<p>Syntax</p>
<pre><code class="language-graphql">&quot;&quot;&quot;
tanka_import from &quot;embedded://&lt;assembly&gt;/&lt;resourceName&gt;&quot;
&quot;&quot;&quot;
</code></pre>
<h3 id="other-examples">Other Examples</h3>
<p>See <a href="master/2-server/5-extensions/5-query-cost-analysis.html">cost-analysis</a> for example import from the TGQL extensions.</p>
                    
            </main>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    
    <script type="text/javascript" src="master/prism.js"></script>
</body>
</html>
