# Apollo Federation v2.3 Schema
# https://specs.apollo.dev/federation/v2.3

scalar _Any
scalar FieldSet

type _Service {
  sdl: String!
}

# Union of all entity types (dynamically generated)
union _Entity

extend type Query {
  _entities(representations: [_Any!]!): [_Entity]!
  _service: _Service!
}

# Core Federation v1 directives
directive @external on FIELD_DEFINITION | OBJECT
directive @requires(fields: FieldSet!) on FIELD_DEFINITION
directive @provides(fields: FieldSet!) on FIELD_DEFINITION
directive @key(fields: FieldSet!, resolvable: Boolean = true) repeatable on OBJECT | INTERFACE

# Federation v2 directives
directive @shareable repeatable on OBJECT | FIELD_DEFINITION
directive @inaccessible on 
  | FIELD_DEFINITION 
  | OBJECT 
  | INTERFACE 
  | UNION 
  | ARGUMENT_DEFINITION 
  | SCALAR 
  | ENUM 
  | ENUM_VALUE 
  | INPUT_OBJECT 
  | INPUT_FIELD_DEFINITION

directive @tag(name: String!) repeatable on 
  | FIELD_DEFINITION 
  | INTERFACE 
  | OBJECT 
  | UNION 
  | ARGUMENT_DEFINITION 
  | SCALAR 
  | ENUM 
  | ENUM_VALUE 
  | INPUT_OBJECT 
  | INPUT_FIELD_DEFINITION

directive @override(from: String!) on FIELD_DEFINITION
directive @composeDirective(name: String!) repeatable on SCHEMA
directive @interfaceObject on OBJECT

# Security/Policy directives (Federation v2.1+)
directive @authenticated on 
  | FIELD_DEFINITION 
  | OBJECT 
  | INTERFACE 
  | SCALAR 
  | ENUM

directive @requiresScopes(scopes: [[federation__Scope!]!]!) on 
  | FIELD_DEFINITION 
  | OBJECT 
  | INTERFACE 
  | SCALAR 
  | ENUM

directive @policy(policies: [[federation__Policy!]!]!) on 
  | FIELD_DEFINITION 
  | OBJECT 
  | INTERFACE 
  | SCALAR 
  | ENUM

# Federation context directive (experimental)
directive @context(name: String!) repeatable on INTERFACE | OBJECT | UNION

# Federation scalars for security/policy
scalar federation__Scope
scalar federation__Policy
scalar federation__ContextFieldValue